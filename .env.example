# ===========================================
# Calricula - Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values

# ===========================================
# DATABASE
# ===========================================
# LOCAL DOCKER (default - no setup required!)
# The agent creates docker-compose.yml with PostgreSQL included
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/calricula

# CLOUD OPTION: Neon Serverless Postgres (only if you don't want Docker)
# Create free database at https://neon.tech and paste connection string
# DATABASE_URL=postgresql://user:password@ep-xxx.us-east-2.aws.neon.tech/calricula?sslmode=require

# ===========================================
# DATABASE CONNECTION POOL SETTINGS
# ===========================================
# These settings control how database connections are managed.
# Default values work well for most deployments.

# Number of connections to keep in the pool (default: 5)
# DB_POOL_SIZE=5

# Maximum connections beyond pool_size for burst traffic (default: 10)
# DB_MAX_OVERFLOW=10

# Seconds to wait for a connection before timeout (default: 30)
# DB_POOL_TIMEOUT=30

# Recycle connections after N seconds (default: 1800 = 30 min)
# Important for Neon serverless - set lower if connections drop
# DB_POOL_RECYCLE=1800

# Health check connections before use (default: true)
# Slightly slower but prevents "connection closed" errors
# DB_POOL_PRE_PING=true

# Use NullPool (no pooling) for serverless/edge deployments (default: false)
# Set to true for AWS Lambda, Vercel Edge, etc.
# DB_USE_NULLPOOL=false

# ===========================================
# GOOGLE AI (Gemini + File Search)
# ===========================================
# Get from: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=AIzaSy...your-api-key

# File Search Store name (created by the app on first run, or manually)
# This stores embedded curriculum documents for RAG
GEMINI_FILE_SEARCH_STORE_NAME=calricula-knowledge-base

# ===========================================
# FIREBASE AUTHENTICATION
# ===========================================
# Get from: Firebase Console > Project Settings > General
FIREBASE_PROJECT_ID=your-project-id

# Path to Firebase Admin SDK service account key
# Download from: Firebase Console > Project Settings > Service Accounts > Generate New Private Key
# Place in project root initially; agent will move to /backend when created
FIREBASE_SERVICE_ACCOUNT_PATH=./serviceAccountKey.json

# Firebase Web Config (for frontend)
# Get from: Firebase Console > Project Settings > Your Apps > Web App
NEXT_PUBLIC_FIREBASE_API_KEY=AIzaSy...
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id

# ===========================================
# DEVELOPMENT AUTH BYPASS
# ===========================================
# Enable this to bypass Firebase authentication during development.
# This creates mock user sessions for testing without Firebase setup.
# WARNING: Never enable this in production!
NEXT_PUBLIC_AUTH_DEV_MODE=false

# ===========================================
# APPLICATION SETTINGS
# ===========================================
# Backend
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
DEBUG=true

# ===========================================
# LOGGING
# ===========================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
LOG_LEVEL=INFO

# Use JSON format for logs (default: true for production)
# Set to false for human-readable logs during development
LOG_JSON_FORMAT=true

# Frontend
NEXT_PUBLIC_API_URL=http://localhost:8000

# ===========================================
# PRODUCTION DOCKER SETTINGS
# ===========================================
# These are used by docker-compose.prod.yml

# Database credentials for production container
DB_USER=calricula
DB_PASSWORD=your-secure-password-here
DB_NAME=calricula

# Port mappings (optional, defaults shown)
# BACKEND_PORT=8000
# FRONTEND_PORT=3000

# Environment (set to 'production' for production)
ENVIRONMENT=development

# ===========================================
# AUTONOMOUS AGENT (if using autocode harness)
# ===========================================
# Claude Code OAuth token - Run: claude setup-token
# CLAUDE_CODE_OAUTH_TOKEN=your-oauth-token

# Linear API key - Get from: https://linear.app/YOUR-TEAM/settings/api
# LINEAR_API_KEY=lin_api_xxxxxxxxxxxxx
